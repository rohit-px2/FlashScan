<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    
    <!--====== Title ======-->
    <title>Upload Files</title>
    
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--====== Favicon Icon ======-->
    <link rel="shortcut icon" href="images/favicon.png" type="image/png">
        
    <!--====== Animate CSS ======-->
    <link rel="stylesheet" href="css/animate.css">
                
    <!--====== Line Icons CSS ======-->
    <link rel="stylesheet" href="css/LineIcons.2.0.css">
        
    <!--====== Bootstrap CSS ======-->
    <link rel="stylesheet" href="css/bootstrap-4.5.0.min.css">
    
    <!--====== Default CSS ======-->
    <link rel="stylesheet" href="css/default.css">
    
    <!--====== Style CSS ======-->
    <link rel="stylesheet" href="css/style.css">
    

</head>

<body>
    <!--[if IE]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->    
   
   
    <!--====== PRELOADER PART START ======-->

    <div class="preloader">
        <div class="loader">
            <div class="ytp-spinner">
                <div class="ytp-spinner-container">
                    <div class="ytp-spinner-rotator">
                        <div class="ytp-spinner-left">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                        <div class="ytp-spinner-right">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--====== PRELOADER PART ENDS ======-->
    
    <!--====== HEADER PART START ======-->
    
    <header class="header-area">
        
        <div id="home" class="header-hero bg_cover" style="background-image: url(images/banner-bg.svg)">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="header-hero-content text-center">
         
                            <h1 class="header-title wow fadeInUp" style="text-align: center;font-size: 40px;" data-wow-duration="1.3s" data-wow-delay="0.5s">ImagePortal</h1>
                            <p class="text wow fadeInUp" style="text-align: center;font-size: 20px;" data-wow-duration="1.3s" data-wow-delay="0.8s">Lightning fast image transfers from your phone to your computer.</p>
                           <br>
                           <br>
                        </div> <!-- header hero content -->
                    </div>
                </div> <!-- row -->
              
                <div class="subscribe-area wow fadeIn" data-wow-duration="1s" data-wow-delay="0.5s">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="subscribe-content mt-45">
                        
                                <h2 class="title">Success!</h2>
                                <p class="text">Upload your images below:</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="subscribe-form mt-50">
                                <form id="uploadForm" enctype="multipart/form-data" method="POST">
                                    <div class="box">
                                        <input type="file" name="file-1[]" id="file-1" class="inputfile inputfile-1" data-multiple-caption="{count} files selected" multiple />
                                        <label for="file-1"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg> <span> &nbsp Choose pictures&hellip;</span></label>
                                    </div>
                                    <br>
                                    <button type="submit">Submit</button>
                                  </form>
                                  <script>
                                    const toBase64 = file => new Promise((resolve, reject) => {
                                        const reader = new FileReader();
                                        reader.readAsDataURL(file);
                                        reader.onload = () => resolve(reader.result);
                                        reader.onerror = error => reject(error);
                                    });
                              
                                    let f = document.getElementById("uploadForm")
                                    const id = window.location.href.split("/")[3]
                                    f.action=`/image/${id}`
                                    f.addEventListener("submit", async event => {
                                      event.preventDefault()
                                      var input = document.getElementById("file-1")
                                      var files = input.files
                                      const url = `/image/${id}`
                                      for(let i = 0; i < files.length; i++) {
                                        const img = await toBase64(files.item(i))
                                        console.log(typeof(img))
                                        console.log(img)
                                        const response = await fetch(url, {
                                          method: 'POST',
                                          mode: 'cors',
                                          headers: {
                                            'Accept': "application/json",
                                            'Content-Type': "application/json"
                                          },
                                          cache: 'no-cache',
                                          credentials: 'same-origin',
                                          body: JSON.stringify({
                                            data: img
                                          })
                                        })
                                      }
                                    })
                                  </script>
                            </div>
                        </div>
                     </div> <!-- row -->
                </div> <!-- subscribe area -->

                    <br>
                    <br>


            </div> <!-- container -->
            <div id="particles-1" class="particles"></div>
        </div> <!-- header hero -->
    </header>
    
    <!--====== HEADER PART ENDS ======-->
    
   
  

    


    <!--====== Jquery js ======-->
    <script src="js/vendor/jquery-3.5.1-min.js"></script>
    <script src="js/vendor/modernizr-3.7.1.min.js"></script>
    
    <!--====== Bootstrap js ======-->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.5.0.min.js"></script>
    
    <!--====== Plugins js ======-->
    <script src="js/plugins.js"></script>
    
    <!--====== Counter Up js ======-->
    <script src="js/waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    

    
    <!--====== Scrolling Nav js ======-->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrolling-nav.js"></script>
    
    <!--====== wow js ======-->
    <script src="js/wow.min.js"></script>
    
    <!--====== Particles js ======-->
    <script src="js/particles.min.js"></script>
    
    <!--====== Main js ======-->
    <script src="js/main.js"></script>
    <script src="js/custom-file-input.js"></script>
</body>

</html>